<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Agent Intake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-store">
  <link rel="stylesheet" href="../frontend-shared/styles.css">
  <script src="../frontend-shared/config.js"></script>
</head>
<body>
  <div class="intake-container">
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-container">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading company information...</div>
    </div>
    
    <!-- Main Form (hidden until loaded) -->
    <div id="mainForm" style="display: none;">
      <div class="intake-header">
        <h2>Call Intake Form</h2>
        <div class="company-subtitle" id="companySubtitle" style="display: none;"></div>
      </div>
      
      <div id="errorBanner" class="error-banner" style="display:none;"></div>
    
    <form id="intakeForm" class="quick-form" autocomplete="off" novalidate>
    <!-- Company Selection -->
    <div class="form-section">
      <div class="section-title">Company</div>
      <div class="quick-field">
        <label>Select Company <span class="field-shortcut">Tab to next</span></label>
        <select id="company" required autocomplete="off" tabindex="1">
          <option value="">Choose company...</option>
        </select>
        <div class="error" data-for="company"></div>
      </div>
    </div>

    <!-- Customer Information -->
    <div class="form-section">
      <div class="section-title">Customer Information</div>
      <div class="customer-grid">
        <div class="quick-field">
          <label>First Name</label>
          <input type="text" id="firstName" placeholder="John" required autocomplete="off" tabindex="2">
          <div class="error" data-for="firstName"></div>
        </div>
        <div class="quick-field">
          <label>Last Name</label>
          <input type="text" id="lastName" placeholder="Smith" required autocomplete="off" tabindex="3">
          <div class="error" data-for="lastName"></div>
        </div>
      </div>
      
      <div class="quick-field">
        <label>Address <span class="field-shortcut">Google Places autocomplete enabled</span></label>
        <div class="address-grid">
          <input type="text" id="addressStreet" placeholder="Start typing address..." required autocomplete="off" tabindex="4">
          <input type="text" id="addressCity" placeholder="City (auto-filled)" required autocomplete="off" tabindex="5">
          <input type="text" id="addressState" placeholder="ST" required autocomplete="off" tabindex="6" maxlength="2" style="text-transform: uppercase;">
          <input type="text" id="addressPostal" placeholder="Zip (auto-filled)" required autocomplete="off" tabindex="7" maxlength="10">
        </div>
        <div class="error" data-for="addressStreet"></div>
        <div class="error" data-for="addressCity"></div>
        <div class="error" data-for="addressState"></div>
        <div class="error" data-for="addressPostal"></div>
      </div>
    </div>

    <!-- Call Details -->
    <div class="form-section">
      <div class="section-title">Call Details</div>
      <div class="quick-field">
        <label>Reason for Call</label>
        <select id="reason" required autocomplete="off" tabindex="8">
          <option value="">Select reason...</option>
          <option value="Schedule">Schedule Appointment</option>
          <option value="Reschedule">Reschedule Appointment</option>
          <option value="New Sale">New Sale</option>
          <option value="Cancellation">Cancellation</option>
          <option value="Complaint">Complaint</option>
          <option value="Other…">Other...</option>
        </select>
        <div class="error" data-for="reason"></div>
      </div>

      <div class="quick-field" id="reasonOtherWrap" style="display:none;">
        <label>Specify Other Reason</label>
        <input type="text" id="reasonOther" placeholder="Please specify..." autocomplete="off" tabindex="9">
      </div>
    </div>

    <!-- Product & Pricing -->
    <div class="form-section">
      <div class="section-title">Product & Pricing</div>
      <div class="product-grid">
        <div class="quick-field">
          <label>Product/Service</label>
          <select id="product" required autocomplete="off" tabindex="10">
            <option value="">Select product...</option>
          </select>
          <div class="error" data-for="product"></div>
        </div>
          <div class="quick-field">
            <label>Price</label>
            <input type="text" id="productPrice" readonly tabindex="-1" style="background: var(--card); color: var(--muted);">
          </div>
      </div>
    </div>

    <!-- Additional Notes -->
    <div class="form-section">
      <div class="section-title">Additional Notes</div>
      <div class="quick-field">
        <label>Additional Information</label>
        <textarea id="notes" rows="3" placeholder="Any additional details about the call..." autocomplete="off" tabindex="12"></textarea>
      </div>
    </div>

    <!-- Submit -->
    <div class="submit-section">
      <button type="submit" id="submitBtn" class="submit-btn" tabindex="13">
        Save Lead
      </button>
      <div style="margin-top: 16px; font-size: 14px; color: var(--muted);">
        Form will reset automatically after saving • Press Ctrl+Enter to submit
      </div>
    </div>
    </form>
    </div> <!-- End mainForm -->
  </div> <!-- End intake-container -->
  
  <div id="toast" role="status" aria-live="polite"></div>
  <script src="app.js"></script>
</body>
</html>
